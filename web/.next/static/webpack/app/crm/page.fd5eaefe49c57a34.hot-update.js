"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/crm/page",{

/***/ "(app-pages-browser)/./app/services/crmApi.ts":
/*!********************************!*\
  !*** ./app/services/crmApi.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getActivitiesFor: function() { return /* binding */ getActivitiesFor; },\n/* harmony export */   getContact: function() { return /* binding */ getContact; },\n/* harmony export */   getDealDetail: function() { return /* binding */ getDealDetail; },\n/* harmony export */   getDealsByPipeline: function() { return /* binding */ getDealsByPipeline; },\n/* harmony export */   getPipelineStages: function() { return /* binding */ getPipelineStages; },\n/* harmony export */   isSupabaseConfigured: function() { return /* binding */ isSupabaseConfigured; },\n/* harmony export */   updateDealStage: function() { return /* binding */ updateDealStage; }\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(app-pages-browser)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// Supabase-backed CRM API helpers (SSR/RLS friendly)\n// Falls back to mock when env is missing. Types from supabase.types.ts\n\nconst SUPABASE_URL = \"https://jkrxflynplzczpkzhygs.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImprcnhmbHlucGx6Y3pwa3poeWdzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzNDczOTksImV4cCI6MjA2OTkyMzM5OX0.QYOOVOK4cI44IsSQz1MGdSQbUKJwI4frO-YdNv8hvpU\";\nfunction getClient() {\n    if (!SUPABASE_URL || !SUPABASE_ANON_KEY) return null;\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_ANON_KEY, {\n        auth: {\n            persistSession: false\n        }\n    });\n}\n// Mock fallback for dev without env configured\nconst mock = {\n    stages: [\n        {\n            id: \"s1\",\n            name: \"New\",\n            order_index: 10,\n            probability: 10\n        },\n        {\n            id: \"s2\",\n            name: \"Contacted\",\n            order_index: 20,\n            probability: 25\n        },\n        {\n            id: \"s3\",\n            name: \"Qualified\",\n            order_index: 30,\n            probability: 45\n        }\n    ],\n    dealsByStage: {\n        s1: [\n            {\n                id: \"d1\",\n                title: \"Acme - Pilot\",\n                stage_id: \"s1\",\n                amount: 2500,\n                currency: \"USD\"\n            }\n        ],\n        s2: [],\n        s3: []\n    },\n    activities: [\n        {\n            id: \"a1\",\n            type: \"system\",\n            related_type: \"deal\",\n            related_id: \"d1\",\n            content: \"Seed: deal created\",\n            meta_json: null,\n            created_by: null,\n            created_at: new Date().toISOString()\n        }\n    ],\n    contact: {\n        id: \"c1\",\n        email: \"john@acme.com\",\n        full_name: \"John Doe\",\n        title: \"VP Sales\",\n        linkedin_url: \"https://linkedin.com/in/johndoe\",\n        website: \"https://acme.com\",\n        phone: null,\n        company_id: null,\n        owner_id: null,\n        lifecycle_stage: \"lead\",\n        reply_status: null,\n        reply_summary: null,\n        generated_body_step1: null,\n        generated_body_step2: null,\n        generated_body_step3: null,\n        latest_email_sent_at: null,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }\n};\nasync function getPipelineStages(pipelineId) {\n    const supabase = getClient();\n    if (!supabase) return mock.stages;\n    // default pipeline resolve\n    const pipeline = pipelineId ? {\n        id: pipelineId\n    } : await (async ()=>{\n        const { data, error } = await supabase.from(\"pipelines\").select(\"id\").eq(\"is_default\", true).order(\"created_at\", {\n            ascending: true\n        }).limit(1).maybeSingle();\n        if (error) throw error;\n        return data;\n    })();\n    if (!(pipeline === null || pipeline === void 0 ? void 0 : pipeline.id)) return [];\n    const { data, error } = await supabase.from(\"pipeline_stages\").select(\"id,name,order_index,probability\").eq(\"pipeline_id\", pipeline.id).order(\"order_index\", {\n        ascending: true\n    });\n    if (error) throw error;\n    return data !== null && data !== void 0 ? data : [];\n}\nasync function getDealsByPipeline(pipelineId) {\n    const supabase = getClient();\n    if (!supabase) return mock.dealsByStage;\n    // resolve pipeline id\n    let pid = pipelineId;\n    if (!pid) {\n        const { data, error } = await supabase.from(\"pipelines\").select(\"id\").eq(\"is_default\", true).order(\"created_at\", {\n            ascending: true\n        }).limit(1).maybeSingle();\n        if (error) throw error;\n        pid = data === null || data === void 0 ? void 0 : data.id;\n    }\n    if (!pid) return {};\n    // fetch deals + join names\n    const { data: deals, error } = await supabase.from(\"deals\").select(\"id,title,amount,currency,stage_id,company_id,contact_id\").eq(\"pipeline_id\", pid);\n    if (error) throw error;\n    // fetch related names in one go\n    const companyIds = Array.from(new Set((deals !== null && deals !== void 0 ? deals : []).map((d)=>d.company_id).filter(Boolean)));\n    const contactIds = Array.from(new Set((deals !== null && deals !== void 0 ? deals : []).map((d)=>d.contact_id).filter(Boolean)));\n    const [companiesRes, contactsRes] = await Promise.all([\n        companyIds.length ? supabase.from(\"companies\").select(\"id,name\").in(\"id\", companyIds) : Promise.resolve({\n            data: [],\n            error: null\n        }),\n        contactIds.length ? supabase.from(\"contacts\").select(\"id,full_name\").in(\"id\", contactIds) : Promise.resolve({\n            data: [],\n            error: null\n        })\n    ]);\n    if (companiesRes.error) throw companiesRes.error;\n    if (contactsRes.error) throw contactsRes.error;\n    var _companiesRes_data;\n    const companyMap = new Map(((_companiesRes_data = companiesRes.data) !== null && _companiesRes_data !== void 0 ? _companiesRes_data : []).map((c)=>[\n            c.id,\n            c.name\n        ]));\n    var _contactsRes_data;\n    const contactMap = new Map(((_contactsRes_data = contactsRes.data) !== null && _contactsRes_data !== void 0 ? _contactsRes_data : []).map((c)=>[\n            c.id,\n            c.full_name\n        ]));\n    const grouped = {};\n    for (const d of deals !== null && deals !== void 0 ? deals : []){\n        var _d_amount, _d_currency, _companyMap_get, _contactMap_get;\n        const card = {\n            id: d.id,\n            title: d.title,\n            amount: (_d_amount = d.amount) !== null && _d_amount !== void 0 ? _d_amount : null,\n            currency: (_d_currency = d.currency) !== null && _d_currency !== void 0 ? _d_currency : null,\n            stage_id: d.stage_id,\n            company: d.company_id ? (_companyMap_get = companyMap.get(d.company_id)) !== null && _companyMap_get !== void 0 ? _companyMap_get : null : null,\n            contact: d.contact_id ? (_contactMap_get = contactMap.get(d.contact_id)) !== null && _contactMap_get !== void 0 ? _contactMap_get : null : null\n        };\n    }\n    return grouped;\n}\nasync function getDealDetail(id) {\n    const supabase = getClient();\n    if (!supabase) {\n        const anyDeal = Object.values(mock.dealsByStage).flat()[0];\n        if (!anyDeal) return null;\n        var _anyDeal_amount, _anyDeal_currency;\n        // minimal mock cast\n        return {\n            id: anyDeal.id,\n            title: anyDeal.title,\n            amount: (_anyDeal_amount = anyDeal.amount) !== null && _anyDeal_amount !== void 0 ? _anyDeal_amount : null,\n            currency: (_anyDeal_currency = anyDeal.currency) !== null && _anyDeal_currency !== void 0 ? _anyDeal_currency : null,\n            company_id: null,\n            contact_id: null,\n            pipeline_id: \"default\",\n            stage_id: anyDeal.stage_id,\n            status: \"open\",\n            source: \"inbound\",\n            notes: \"Mock\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n            close_date: null\n        };\n    }\n    const { data, error } = await supabase.from(\"deals\").select(\"*\").eq(\"id\", id).maybeSingle();\n    if (error) throw error;\n    return data;\n}\nasync function getActivitiesFor(relatedType, relatedId) {\n    const supabase = getClient();\n    if (!supabase) return mock.activities;\n    const { data, error } = await supabase.from(\"activities\").select(\"*\").eq(\"related_type\", relatedType).eq(\"related_id\", relatedId).order(\"created_at\", {\n        ascending: false\n    });\n    if (error) throw error;\n    return data !== null && data !== void 0 ? data : [];\n}\nasync function getContact(id) {\n    const supabase = getClient();\n    if (!supabase) return mock.contact;\n    const { data, error } = await supabase.from(\"contacts\").select(\"*\").eq(\"id\", id).maybeSingle();\n    if (error) throw error;\n    return data;\n}\n// Actions (write) — protected by RLS; expect JWT in frontend context.\n// For SSR/Edge secure writes, prefer server-only key or edge function proxy.\nasync function updateDealStage(dealId, nextStageId) {\n    const supabase = getClient();\n    if (!supabase) return {\n        ok: true\n    };\n    const { error } = await supabase.from(\"deals\").update({\n        stage_id: nextStageId\n    }).eq(\"id\", dealId);\n    if (error) return {\n        ok: false,\n        error: error.message\n    };\n    return {\n        ok: true\n    };\n}\n// Helper to detect env presence\nfunction isSupabaseConfigured() {\n    return Boolean(SUPABASE_URL && SUPABASE_ANON_KEY);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9zZXJ2aWNlcy9jcm1BcGkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxxREFBcUQ7QUFDckQsdUVBQXVFO0FBRW5CO0FBd0JwRCxNQUFNQyxlQUFlQywwQ0FBb0M7QUFDekQsTUFBTUcsb0JBQW9CSCxrTkFBeUM7QUFFbkUsU0FBU0s7SUFDUCxJQUFJLENBQUNOLGdCQUFnQixDQUFDSSxtQkFBbUIsT0FBTztJQUNoRCxPQUFPTCxtRUFBWUEsQ0FBV0MsY0FBY0ksbUJBQW1CO1FBQzdERyxNQUFNO1lBQ0pDLGdCQUFnQjtRQUNsQjtJQUNGO0FBQ0Y7QUFFQSwrQ0FBK0M7QUFDL0MsTUFBTUMsT0FBTztJQUNYQyxRQUFRO1FBQ047WUFBRUMsSUFBSTtZQUFNQyxNQUFNO1lBQU9DLGFBQWE7WUFBSUMsYUFBYTtRQUFHO1FBQzFEO1lBQUVILElBQUk7WUFBTUMsTUFBTTtZQUFhQyxhQUFhO1lBQUlDLGFBQWE7UUFBRztRQUNoRTtZQUFFSCxJQUFJO1lBQU1DLE1BQU07WUFBYUMsYUFBYTtZQUFJQyxhQUFhO1FBQUc7S0FDakU7SUFDREMsY0FBYztRQUNaQyxJQUFJO1lBQUM7Z0JBQUVMLElBQUk7Z0JBQU1NLE9BQU87Z0JBQWdCQyxVQUFVO2dCQUFNQyxRQUFRO2dCQUFNQyxVQUFVO1lBQU07U0FBRTtRQUN4RkMsSUFBSSxFQUFFO1FBQ05DLElBQUksRUFBRTtJQUNSO0lBQ0FDLFlBQVk7UUFDVjtZQUFFWixJQUFJO1lBQU1hLE1BQU07WUFBVUMsY0FBYztZQUFRQyxZQUFZO1lBQU1DLFNBQVM7WUFBc0JDLFdBQVc7WUFBTUMsWUFBWTtZQUFNQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7UUFBRztLQUM1SztJQUNEQyxTQUFTO1FBQ1B0QixJQUFJO1FBQU11QixPQUFPO1FBQWlCQyxXQUFXO1FBQVlsQixPQUFPO1FBQ2hFbUIsY0FBYztRQUFtQ0MsU0FBUztRQUMxREMsT0FBTztRQUFNQyxZQUFZO1FBQU1DLFVB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b0QsSUFBSTtRQUFPcEQsT0FBT0EsTUFBTXNELE9BQU87SUFBQztJQUNwRCxPQUFPO1FBQUVGLElBQUk7SUFBSztBQUNwQjtBQUVBLGdDQUFnQztBQUN6QixTQUFTRztJQUNkLE9BQU90QyxRQUFRdkUsZ0JBQWdCSTtBQUNqQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9hcHAvc2VydmljZXMvY3JtQXBpLnRzPzgxZWUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU3VwYWJhc2UtYmFja2VkIENSTSBBUEkgaGVscGVycyAoU1NSL1JMUyBmcmllbmRseSlcclxuLy8gRmFsbHMgYmFjayB0byBtb2NrIHdoZW4gZW52IGlzIG1pc3NpbmcuIFR5cGVzIGZyb20gc3VwYWJhc2UudHlwZXMudHNcclxuXHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcclxuaW1wb3J0IHR5cGUgeyBEYXRhYmFzZSwgVGFibGVzIH0gZnJvbSAnLi9zdXBhYmFzZS50eXBlcydcclxuXHJcbnR5cGUgRGVhbENhcmQgPSB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIHRpdGxlOiBzdHJpbmdcclxuICBjb21wYW55Pzogc3RyaW5nIHwgbnVsbFxyXG4gIGNvbnRhY3Q/OiBzdHJpbmcgfCBudWxsXHJcbiAgYW1vdW50PzogbnVtYmVyIHwgbnVsbFxyXG4gIGN1cnJlbmN5Pzogc3RyaW5nIHwgbnVsbFxyXG4gIHN0YWdlX2lkOiBzdHJpbmdcclxufVxyXG5cclxudHlwZSBTdGFnZSA9IHtcclxuICBpZDogc3RyaW5nXHJcbiAgbmFtZTogc3RyaW5nXHJcbiAgb3JkZXJfaW5kZXg6IG51bWJlclxyXG4gIHByb2JhYmlsaXR5OiBudW1iZXIgfCBudWxsXHJcbn1cclxuXHJcbnR5cGUgQWN0aXZpdHkgPSBUYWJsZXM8J2FjdGl2aXRpZXMnPlxyXG50eXBlIERlYWwgPSBUYWJsZXM8J2RlYWxzJz5cclxudHlwZSBDb250YWN0ID0gVGFibGVzPCdjb250YWN0cyc+XHJcblxyXG5jb25zdCBTVVBBQkFTRV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkxcclxuY29uc3QgU1VQQUJBU0VfQU5PTl9LRVkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2xpZW50KCkge1xyXG4gIGlmICghU1VQQUJBU0VfVVJMIHx8ICFTVVBBQkFTRV9BTk9OX0tFWSkgcmV0dXJuIG51bGxcclxuICByZXR1cm4gY3JlYXRlQ2xpZW50PERhdGFiYXNlPihTVVBBQkFTRV9VUkwsIFNVUEFCQVNFX0FOT05fS0VZLCB7XHJcbiAgICBhdXRoOiB7XHJcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8vIE1vY2sgZmFsbGJhY2sgZm9yIGRldiB3aXRob3V0IGVudiBjb25maWd1cmVkXHJcbmNvbnN0IG1vY2sgPSB7XHJcbiAgc3RhZ2VzOiBbXHJcbiAgICB7IGlkOiAnczEnLCBuYW1lOiAnTmV3Jywgb3JkZXJfaW5kZXg6IDEwLCBwcm9iYWJpbGl0eTogMTAgfSxcclxuICAgIHsgaWQ6ICdzMicsIG5hbWU6ICdDb250YWN0ZWQnLCBvcmRlcl9pbmRleDogMjAsIHByb2JhYmlsaXR5OiAyNSB9LFxyXG4gICAgeyBpZDogJ3MzJywgbmFtZTogJ1F1YWxpZmllZCcsIG9yZGVyX2luZGV4OiAzMCwgcHJvYmFiaWxpdHk6IDQ1IH1cclxuICBdIGFzIFN0YWdlW10sXHJcbiAgZGVhbHNCeVN0YWdlOiB7XHJcbiAgICBzMTogW3sgaWQ6ICdkMScsIHRpdGxlOiAnQWNtZSAtIFBpbG90Jywgc3RhZ2VfaWQ6ICdzMScsIGFtb3VudDogMjUwMCwgY3VycmVuY3k6ICdVU0QnIH1dLFxyXG4gICAgczI6IFtdLFxyXG4gICAgczM6IFtdXHJcbiAgfSBhcyBSZWNvcmQ8c3RyaW5nLCBEZWFsQ2FyZFtdPixcclxuICBhY3Rpdml0aWVzOiBbXHJcbiAgICB7IGlkOiAnYTEnLCB0eXBlOiAnc3lzdGVtJywgcmVsYXRlZF90eXBlOiAnZGVhbCcsIHJlbGF0ZWRfaWQ6ICdkMScsIGNvbnRlbnQ6ICdTZWVkOiBkZWFsIGNyZWF0ZWQnLCBtZXRhX2pzb246IG51bGwsIGNyZWF0ZWRfYnk6IG51bGwsIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9XHJcbiAgXSBhcyBBY3Rpdml0eVtdLFxyXG4gIGNvbnRhY3Q6IHtcclxuICAgIGlkOiAnYzEnLCBlbWFpbDogJ2pvaG5AYWNtZS5jb20nLCBmdWxsX25hbWU6ICdKb2huIERvZScsIHRpdGxlOiAnVlAgU2FsZXMnLFxyXG4gICAgbGlua2VkaW5fdXJsOiAnaHR0cHM6Ly9saW5rZWRpbi5jb20vaW4vam9obmRvZScsIHdlYnNpdGU6ICdodHRwczovL2FjbWUuY29tJyxcclxuICAgIHBob25lOiBudWxsLCBjb21wYW55X2lkOiBudWxsLCBvd25lcl9pZDogbnVsbCwgbGlmZWN5Y2xlX3N0YWdlOiAnbGVhZCcsXHJcbiAgICByZXBseV9zdGF0dXM6IG51bGwsIHJlcGx5X3N1bW1hcnk6IG51bGwsIGdlbmVyYXRlZF9ib2R5X3N0ZXAxOiBudWxsLCBnZW5lcmF0ZWRfYm9keV9zdGVwMjogbnVsbCwgZ2VuZXJhdGVkX2JvZHlfc3RlcDM6IG51bGwsXHJcbiAgICBsYXRlc3RfZW1haWxfc2VudF9hdDogbnVsbCwgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICB9IGFzIENvbnRhY3RcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBpcGVsaW5lU3RhZ2VzKHBpcGVsaW5lSWQ/OiBzdHJpbmcpOiBQcm9taXNlPFN0YWdlW10+IHtcclxuICBjb25zdCBzdXBhYmFzZSA9IGdldENsaWVudCgpXHJcbiAgaWYgKCFzdXBhYmFzZSkgcmV0dXJuIG1vY2suc3RhZ2VzXHJcblxyXG4gIC8vIGRlZmF1bHQgcGlwZWxpbmUgcmVzb2x2ZVxyXG4gIGNvbnN0IHBpcGVsaW5lID0gcGlwZWxpbmVJZFxyXG4gICAgPyB7IGlkOiBwaXBlbGluZUlkIH1cclxuICAgIDogYXdhaXQgKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwaXBlbGluZXMnKS5zZWxlY3QoJ2lkJykuZXEoJ2lzX2RlZmF1bHQnLCB0cnVlKS5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiB0cnVlIH0pLmxpbWl0KDEpLm1heWJlU2luZ2xlKClcclxuICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXHJcbiAgICAgICAgcmV0dXJuIGRhdGFcclxuICAgICAgfSkoKVxyXG5cclxuICBpZiAoIXBpcGVsaW5lPy5pZCkgcmV0dXJuIFtdXHJcblxyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgncGlwZWxpbmVfc3RhZ2VzJylcclxuICAgIC5zZWxlY3QoJ2lkLG5hbWUsb3JkZXJfaW5kZXgscHJvYmFiaWxpdHknKVxyXG4gICAgLmVxKCdwaXBlbGluZV9pZCcsIHBpcGVsaW5lLmlkKVxyXG4gICAgLm9yZGVyKCdvcmRlcl9pbmRleCcsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcclxuICByZXR1cm4gKGRhdGEgPz8gW10pIGFzIFN0YWdlW11cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERlYWxzQnlQaXBlbGluZShwaXBlbGluZUlkPzogc3RyaW5nKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBEZWFsQ2FyZFtdPj4ge1xyXG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0Q2xpZW50KClcclxuICBpZiAoIXN1cGFiYXNlKSByZXR1cm4gbW9jay5kZWFsc0J5U3RhZ2VcclxuXHJcbiAgLy8gcmVzb2x2ZSBwaXBlbGluZSBpZFxyXG4gIGxldCBwaWQgPSBwaXBlbGluZUlkXHJcbiAgaWYgKCFwaWQpIHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3BpcGVsaW5lcycpLnNlbGVjdCgnaWQnKS5lcSgnaXNfZGVmYXVsdCcsIHRydWUpLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IHRydWUgfSkubGltaXQoMSkubWF5YmVTaW5nbGUoKVxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxyXG4gICAgcGlkID0gKGRhdGEgYXMgeyBpZDogc3RyaW5nIH0gfCBudWxsKT8uaWRcclxuICB9XHJcbiAgaWYgKCFwaWQpIHJldHVybiB7fVxyXG5cclxuICAvLyBmZXRjaCBkZWFscyArIGpvaW4gbmFtZXNcclxuICBjb25zdCB7IGRhdGE6IGRlYWxzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdkZWFscycpXHJcbiAgICAuc2VsZWN0KCdpZCx0aXRsZSxhbW91bnQsY3VycmVuY3ksc3RhZ2VfaWQsY29tcGFueV9pZCxjb250YWN0X2lkJylcclxuICAgIC5lcSgncGlwZWxpbmVfaWQnLCBwaWQpXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxyXG5cclxuICAvLyBmZXRjaCByZWxhdGVkIG5hbWVzIGluIG9uZSBnb1xyXG4gIGNvbnN0IGNvbXBhbnlJZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoKGRlYWxzID8/IFtdKS5tYXAoKGQ6IGFueSkgPT4gZC5jb21wYW55X2lkKS5maWx0ZXIoQm9vbGVhbikpKSBhcyBzdHJpbmdbXVxyXG4gIGNvbnN0IGNvbnRhY3RJZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoKGRlYWxzID8/IFtdKS5tYXAoKGQ6IGFueSkgPT4gZC5jb250YWN0X2lkKS5maWx0ZXIoQm9vbGVhbikpKSBhcyBzdHJpbmdbXVxyXG5cclxuICBjb25zdCBbY29tcGFuaWVzUmVzLCBjb250YWN0c1Jlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBjb21wYW55SWRzLmxlbmd0aCA/IHN1cGFiYXNlLmZyb20oJ2NvbXBhbmllcycpLnNlbGVjdCgnaWQsbmFtZScpLmluKCdpZCcsIGNvbXBhbnlJZHMpIDogUHJvbWlzZS5yZXNvbHZlKHsgZGF0YTogW10gYXMgeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfVtdLCBlcnJvcjogbnVsbCB9KSxcclxuICAgIGNvbnRhY3RJZHMubGVuZ3RoID8gc3VwYWJhc2UuZnJvbSgnY29udGFjdHMnKS5zZWxlY3QoJ2lkLGZ1bGxfbmFtZScpLmluKCdpZCcsIGNvbnRhY3RJZHMpIDogUHJvbWlzZS5yZXNvbHZlKHsgZGF0YTogW10gYXMgeyBpZDogc3RyaW5nOyBmdWxsX25hbWU6IHN0cmluZyB8IG51bGwgfVtdLCBlcnJvcjogbnVsbCB9KVxyXG4gIF0pXHJcblxyXG4gIGlmIChjb21wYW5pZXNSZXMuZXJyb3IpIHRocm93IGNvbXBhbmllc1Jlcy5lcnJvclxyXG4gIGlmIChjb250YWN0c1Jlcy5lcnJvcikgdGhyb3cgY29udGFjdHNSZXMuZXJyb3JcclxuXHJcbiAgY29uc3QgY29tcGFueU1hcCA9IG5ldyBNYXAoKGNvbXBhbmllc1Jlcy5kYXRhID8/IFtdKS5tYXAoKGM6IHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0pID0+IFtjLmlkLCBjLm5hbWVdKSlcclxuICBjb25zdCBjb250YWN0TWFwID0gbmV3IE1hcCgoY29udGFjdHNSZXMuZGF0YSA/PyBbXSkubWFwKChjOiB7IGlkOiBzdHJpbmc7IGZ1bGxfbmFtZTogc3RyaW5nIHwgbnVsbCB9KSA9PiBbYy5pZCwgYy5mdWxsX25hbWVdKSlcclxuXHJcbiAgY29uc3QgZ3JvdXBlZDogUmVjb3JkPHN0cmluZywgRGVhbENhcmRbXT4gPSB7fVxyXG4gIGZvciAoY29uc3QgZCBvZiAoZGVhbHMgPz8gW10pIGFzIEFycmF5PHtcclxuICAgIGlkOiBzdHJpbmc7IHRpdGxlOiBzdHJpbmc7IGFtb3VudDogbnVtYmVyIHwgbnVsbDsgY3VycmVuY3k6IHN0cmluZyB8IG51bGw7IHN0YWdlX2lkOiBzdHJpbmc7IGNvbXBhbnlfaWQ6IHN0cmluZyB8IG51bGw7IGNvbnRhY3RfaWQ6IHN0cmluZyB8IG51bGw7XHJcbiAgfT4pIHtcclxuICAgIGNvbnN0IGNhcmQ6IERlYWxDYXJkID0ge1xyXG4gICAgICBpZDogZC5pZCxcclxuICAgICAgdGl0bGU6IGQudGl0bGUsXHJcbiAgICAgIGFtb3VudDogZC5hbW91bnQgPz8gbnVsbCxcclxuICAgICAgY3VycmVuY3k6IGQuY3VycmVuY3kgPz8gbnVsbCxcclxuICAgICAgc3RhZ2VfaWQ6IGQuc3RhZ2VfaWQsXHJcbiAgICAgIGNvbXBhbnk6IGQuY29tcGFueV9pZCA/IChjb21wYW55TWFwLmdldChkLmNvbXBhbnlfaWQpID8/IG51bGwpIDogbnVsbCxcclxuICAgICAgY29udGFjdDogZC5jb250YWN0X2lkID8gKGNvbnRhY3RNYXAuZ2V0KGQuY29udGFjdF9pZCkgPz8gbnVsbCkgOiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBncm91cGVkXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREZWFsRGV0YWlsKGlkOiBzdHJpbmcpOiBQcm9taXNlPERlYWwgfCBudWxsPiB7XHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRDbGllbnQoKVxyXG4gIGlmICghc3VwYWJhc2UpIHtcclxuICAgIGNvbnN0IGFueURlYWwgPSAoT2JqZWN0LnZhbHVlcyhtb2NrLmRlYWxzQnlTdGFnZSkuZmxhdCgpWzBdIGFzIERlYWxDYXJkIHwgdW5kZWZpbmVkKVxyXG4gICAgaWYgKCFhbnlEZWFsKSByZXR1cm4gbnVsbFxyXG4gICAgLy8gbWluaW1hbCBtb2NrIGNhc3RcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiBhbnlEZWFsLmlkLFxyXG4gICAgICB0aXRsZTogYW55RGVhbC50aXRsZSxcclxuICAgICAgYW1vdW50OiBhbnlEZWFsLmFtb3VudCA/PyBudWxsLFxyXG4gICAgICBjdXJyZW5jeTogYW55RGVhbC5jdXJyZW5jeSA/PyBudWxsLFxyXG4gICAgICBjb21wYW55X2lkOiBudWxsLFxyXG4gICAgICBjb250YWN0X2lkOiBudWxsLFxyXG4gICAgICBwaXBlbGluZV9pZDogJ2RlZmF1bHQnLFxyXG4gICAgICBzdGFnZV9pZDogYW55RGVhbC5zdGFnZV9pZCxcclxuICAgICAgc3RhdHVzOiAnb3BlbicsXHJcbiAgICAgIHNvdXJjZTogJ2luYm91bmQnLFxyXG4gICAgICBub3RlczogJ01vY2snLFxyXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgY2xvc2VfZGF0ZTogbnVsbFxyXG4gICAgfSBhcyBEZWFsXHJcbiAgfVxyXG5cclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdkZWFscycpLnNlbGVjdCgnKicpLmVxKCdpZCcsIGlkKS5tYXliZVNpbmdsZSgpXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxyXG4gIHJldHVybiBkYXRhIGFzIERlYWwgfCBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY3Rpdml0aWVzRm9yKHJlbGF0ZWRUeXBlOiAnZGVhbCd8J2NvbnRhY3QnfCdjb21wYW55JywgcmVsYXRlZElkOiBzdHJpbmcpOiBQcm9taXNlPEFjdGl2aXR5W10+IHtcclxuICBjb25zdCBzdXBhYmFzZSA9IGdldENsaWVudCgpXHJcbiAgaWYgKCFzdXBhYmFzZSkgcmV0dXJuIG1vY2suYWN0aXZpdGllc1xyXG5cclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2FjdGl2aXRpZXMnKVxyXG4gICAgLnNlbGVjdCgnKicpXHJcbiAgICAuZXEoJ3JlbGF0ZWRfdHlwZScsIHJlbGF0ZWRUeXBlKVxyXG4gICAgLmVxKCdyZWxhdGVkX2lkJywgcmVsYXRlZElkKVxyXG4gICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxyXG4gIHJldHVybiAoZGF0YSA/PyBbXSkgYXMgQWN0aXZpdHlbXVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGFjdChpZDogc3RyaW5nKTogUHJvbWlzZTxDb250YWN0IHwgbnVsbD4ge1xyXG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0Q2xpZW50KClcclxuICBpZiAoIXN1cGFiYXNlKSByZXR1cm4gbW9jay5jb250YWN0XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnY29udGFjdHMnKS5zZWxlY3QoJyonKS5lcSgnaWQnLCBpZCkubWF5YmVTaW5nbGUoKVxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcclxuICByZXR1cm4gZGF0YSBhcyBDb250YWN0IHwgbnVsbFxyXG59XHJcblxyXG4vLyBBY3Rpb25zICh3cml0ZSkg4oCUIHByb3RlY3RlZCBieSBSTFM7IGV4cGVjdCBKV1QgaW4gZnJvbnRlbmQgY29udGV4dC5cclxuLy8gRm9yIFNTUi9FZGdlIHNlY3VyZSB3cml0ZXMsIHByZWZlciBzZXJ2ZXItb25seSBrZXkgb3IgZWRnZSBmdW5jdGlvbiBwcm94eS5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURlYWxTdGFnZShkZWFsSWQ6IHN0cmluZywgbmV4dFN0YWdlSWQ6IHN0cmluZyk6IFByb21pc2U8eyBvazogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xyXG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0Q2xpZW50KClcclxuICBpZiAoIXN1cGFiYXNlKSByZXR1cm4geyBvazogdHJ1ZSB9XHJcblxyXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ2RlYWxzJykudXBkYXRlKHsgc3RhZ2VfaWQ6IG5leHRTdGFnZUlkIH0pLmVxKCdpZCcsIGRlYWxJZClcclxuICBpZiAoZXJyb3IpIHJldHVybiB7IG9rOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfVxyXG4gIHJldHVybiB7IG9rOiB0cnVlIH1cclxufVxyXG5cclxuLy8gSGVscGVyIHRvIGRldGVjdCBlbnYgcHJlc2VuY2VcclxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VwYWJhc2VDb25maWd1cmVkKCk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiBCb29sZWFuKFNVUEFCQVNFX1VSTCAmJiBTVVBBQkFTRV9BTk9OX0tFWSlcclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiU1VQQUJBU0VfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX0FOT05fS0VZIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJnZXRDbGllbnQiLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJtb2NrIiwic3RhZ2VzIiwiaWQiLCJuYW1lIiwib3JkZXJfaW5kZXgiLCJwcm9iYWJpbGl0eSIsImRlYWxzQnlTdGFnZSIsInMxIiwidGl0bGUiLCJzdGFnZV9pZCIsImFtb3VudCIsImN1cnJlbmN5IiwiczIiLCJzMyIsImFjdGl2aXRpZXMiLCJ0eXBlIiwicmVsYXRlZF90eXBlIiwicmVsYXRlZF9pZCIsImNvbnRlbnQiLCJtZXRhX2pzb24iLCJjcmVhdGVkX2J5IiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImNvbnRhY3QiLCJlbWFpbCIsImZ1bGxfbmFtZSIsImxpbmtlZGluX3VybCIsIndlYnNpdGUiLCJwaG9uZSIsImNvbXBhbnlfaWQiLCJvd25lcl9pZCIsImxpZmVjeWNsZV9zdGFnZSIsInJlcGx5X3N0YXR1cyIsInJlcGx5X3N1bW1hcnkiLCJnZW5lcmF0ZWRfYm9keV9zdGVwMSIsImdlbmVyYXRlZF9ib2R5X3N0ZXAyIiwiZ2VuZXJhdGVkX2JvZHlfc3RlcDMiLCJsYXRlc3RfZW1haWxfc2VudF9hdCIsInVwZGF0ZWRfYXQiLCJnZXRQaXBlbGluZVN0YWdlcyIsInBpcGVsaW5lSWQiLCJzdXBhYmFzZSIsInBpcGVsaW5lIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwib3JkZXIiLCJhc2NlbmRpbmciLCJsaW1pdCIsIm1heWJlU2luZ2xlIiwiZ2V0RGVhbHNCeVBpcGVsaW5lIiwicGlkIiwiZGVhbHMiLCJjb21wYW55SWRzIiwiQXJyYXkiLCJTZXQiLCJtYXAiLCJkIiwiZmlsdGVyIiwiQm9vbGVhbiIsImNvbnRhY3RJZHMiLCJjb250YWN0X2lkIiwiY29tcGFuaWVzUmVzIiwiY29udGFjdHNSZXMiLCJQcm9taXNlIiwiYWxsIiwibGVuZ3RoIiwiaW4iLCJyZXNvbHZlIiwiY29tcGFueU1hcCIsIk1hcCIsImMiLCJjb250YWN0TWFwIiwiZ3JvdXBlZCIsImNhcmQiLCJjb21wYW55IiwiZ2V0IiwiZ2V0RGVhbERldGFpbCIsImFueURlYWwiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmbGF0IiwicGlwZWxpbmVfaWQiLCJzdGF0dXMiLCJzb3VyY2UiLCJub3RlcyIsImNsb3NlX2RhdGUiLCJnZXRBY3Rpdml0aWVzRm9yIiwicmVsYXRlZFR5cGUiLCJyZWxhdGVkSWQiLCJnZXRDb250YWN0IiwidXBkYXRlRGVhbFN0YWdlIiwiZGVhbElkIiwibmV4dFN0YWdlSWQiLCJvayIsInVwZGF0ZSIsIm1lc3NhZ2UiLCJpc1N1cGFiYXNlQ29uZmlndXJlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/services/crmApi.ts\n"));

/***/ })

});